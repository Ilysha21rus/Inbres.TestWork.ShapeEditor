<Window xmlns="https://github.com/avaloniaui"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:vm="clr-namespace:SteamWorkshopExplorer.ViewModels"
            x:Class="SteamWorkshopExplorer.Views.MainWindow"
            xmlns:models="clr-namespace:SteamWorkshopExplorer.Models"
            xmlns:views="clr-namespace:SteamWorkshopExplorer.Views"
            x:DataType="vm:MainWindowViewModel"
            Title="Shapes Editor"
            Width="1200" Height="900">

    <Window.DataContext>
        <vm:MainWindowViewModel/>
    </Window.DataContext>

    <DockPanel>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="5">
            <Button Content="Delete" Command="{Binding ClearCommand}" Margin="2"/>
            <Button Content="Add Ellipse" Command="{Binding AddEllipseAtCommand}" Margin="2"/>
            <Button Content="Add C Bezier" Command="{Binding AddBezierCommand}" Margin="2"/>
        </StackPanel>
        
        <Canvas Background="White" PointerPressed="Canvas_PointerPressed">
            <ItemsControl ItemsSource="{Binding Shapes}">
                <ItemsControl.DataTemplates>
        
        <ItemsControl ItemsSource="{Binding Shapes}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas Background="White"
                            PointerPressed="Canvas_PointerPressed"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            
            <ItemsControl.DataTemplates>
                
                <DataTemplate DataType="vm:EllipseViewModel">
                    <Ellipse Width="{Binding Width}"
                             Height="{Binding Height}"
                             Canvas.Left="{Binding X}"
                             Canvas.Top="{Binding Y}"
                             Fill="Brown"
                             Stroke="DarkSlateGray"
                             StrokeThickness="3"/>
                    
                </DataTemplate>

                <DataTemplate DataType="models:BezierModel">
                    <Polyline Points="{Binding ControlPoints}"
                              Fill="BurlyWood"
                              Stroke="IndianRed"
                              StrokeThickness="3"/>
                </DataTemplate>
            </ItemsControl.DataTemplates>
        </ItemsControl>
                    </Canvas>
    </DockPanel>
</Window>